name: Continuous Integration Workflow

on:
  workflow_dispatch:
  push:
    branches:
      - "main"
    paths:
      - "cicd/**"
  pull_request:
    branches:
      - "main"
    paths:
      - "cicd/**"

jobs:
  test:
    name: "Run Automation Tests"
    defaults:
      run:
        shell: bash
        # Define the working directory for all run steps in the workflow
        working-directory: ./cicd
    # Specify the OS we want the workflow to run on
    runs-on: ubuntu-latest
    # Define the steps for this job

    steps:
      - name: 'Checkout Repository'
        uses: actions/checkout@v2
      
      - name: 'Install Dependencies'
        run: npm install 
      
      - name: 'Run Unit Tests'
        run: echo "Running Unit Tests"
      
      - name: 'Run Integration Tests'
        run : echo "Running Integration Tests"
  
  lint:
    name: "Run Linter"
    defaults:
      run:
        shell: bash
        working-directory: ./cicd
    runs-on: ubuntu-latest

    steps:
      - name: "Checkout Repository"
        uses: actions/checkout@v2

      - name: 'Format the code'
        run: echo "Formatting the code in Repository"

  security:
    name: "Run Security Scan"
    defaults:
      run:
        shell: bash
        working-directory: ./cicd
    runs-on: ubuntu-latest

    steps:
      - name: "Checkout Repository"
        uses: actions/checkout@v2
      
      - name: 'Run Security Scans'
        run: "Running Security Scans"
      
